/*
 * UserReplay Client Capture Script v1.12.14
 * Copyright: (c) 2016 User Replay Limited. All rights reserved.
 */
(function(){if(typeof UrCapture!="undefined"){return}var F=null;window.UrCapture={version:"1.12.14",ready:null,imageRequested:false,boundForms:[],autoUpload:true,uploadTriggers:{ajax:[]},cookie:"UrCapture",cookies:true,dimensions:true,dnt:false,exclude:{ajax:[],forms:[],pages:[]},forms:true,headers:false,id:null,ignoreCase:false,referrer:true,scrub:{ajax:[],ids:[],json:[],names:[],regex:[]},scrubCards:true,scrubCardsPartial:false,scrubMask:"*",scrubPasswords:true,scrubSource:true,scrubOptions:false,domScrubbingRules:[],server:null,size:0,source:true,timeout:0,xhr:true,xhrConst:{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},onready:null,onreadyContext:window,onreadyArgs:[],cardFieldCache:(function(){var e=[];return{add:function(i){if(e.indexOf(i)===-1){e.push(i)}},find:function(i){return e.indexOf(i)!==-1?true:false}}}()),getCookie:function(e){var L,N,M=document.cookie.split(";");if(M.length===0){return false}for(L=0;L<M.length;L++){N=M[L].split("=");if(N[0].trim()===e&&typeof N[1]!=="undefined"){return N[1].trim()}}return false},getCookies:function(){return document.cookie},isScrubbed:function(e){return e.getAttribute("urscrub")!=null},contentUpload:function(M){var O,i,Q,N,L={ajax:["target","method","status","responseText"]};try{if(typeof M!=="object"){throw new Error("options must be a valid object")}if(typeof M.action==="undefined"){throw new Error("options.action is a required parameter")}if(typeof M.url==="undefined"){throw new Error("options.url is a required parameter")}O={id:UrCapture.id,action:M.action,cookie:UrCapture.getCookie(UrCapture.cookie),version:UrCapture.version};i=M.action.toLowerCase();if(typeof L[i]!=="undefined"){for(Q in L[i]){if(L[i].hasOwnProperty(Q)){if(typeof M[L[i][Q]]==="undefined"){throw new Error(L[i][Q]+" is a required field for the action: "+M.action)}}}}for(N in M){if(M.hasOwnProperty(N)&&N!=="action"){O[N]=M[N]}}if(O.action==="AJAX"&&typeof O.responseText!==undefined){if(UrCapture.scrubCards){O.responseText=G(O.responseText)}}UrCapture.send(O,true)}catch(P){l(P,"contentUpload")}}};var b={ajax:[],ids:[],json:[],names:[],regexRules:[]};function l(M,i){var L={errMsg:M.message,errCode:(M.number&65535),errName:M.name,errLine:M.lineNumber,errLocation:i};c(L)}function J(M){var L,e="";for(L in M){if(M.hasOwnProperty(L)){e+=L+"="+encodeURIComponent(M[L])+"&"}}e=e.replace(/&$/,"");return e}function c(M){if(UrCapture.imageRequested){return}UrCapture.imageRequested=true;try{var Q=document.cookie.split(UrCapture.cookie+"="),N=(Q.length==2)?Q.pop().split(";").shift():"",i=new Image(),L=UrCapture.server+"/"+(M?"error":"beacon")+".gif?",O={id:UrCapture.id,cookie:N,referrer:document.referrer,version:UrCapture.version};L+=J(O);if(M){L+="&"+J(M)}i.src=L}catch(P){}}try{if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}if(typeof String.prototype.mask!=="function"){String.prototype.mask=function(i,N){var M=this,L="",e=this.length;i=(i.length>=0&&i.length<5)?i:"*";if(N){M=this.substr(0,e-4);L=this.substr(e-4,e)}if(i.length===4){i=i.split("");M=M.replace(/[a-z]/g,i[0]);M=M.replace(/[A-Z]/g,i[1]);M=M.replace(/[^\da-zA-Z]/g,i[3]);M=M.replace(/\d/g,i[2])}else{M=M.replace(/./g,i)}return M+L}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(i){var e=this.length>>>0;var L=Number(arguments[1])||0;L=(L<0)?Math.ceil(L):Math.floor(L);if(L<0){L+=e}for(;L<e;L++){if(L in this&&this[L]===i){return L}}return -1}}if(typeof _UrCapture=="object"){while(_UrCapture.length){var A=_UrCapture.shift();switch(A[0]){case"_autoUpload":UrCapture.autoUpload=(typeof A[1]=="boolean")?A[1]:UrCapture.autoUpload;break;case"_uploadTriggers":UrCapture.uploadTriggers=(typeof A[1]==="object")?A[1]:UrCapture.uploadTriggers;break;case"_cookie":UrCapture.cookie=(typeof A[1]=="string"&&A[1].trim()!="")?A[1]:UrCapture.cookie;break;case"_cookies":UrCapture.cookies=(typeof A[1]=="boolean")?A[1]:UrCapture.cookies;break;case"_dimensions":UrCapture.dimensions=(typeof A[1]=="boolean")?A[1]:UrCapture.dimensions;break;case"_dnt":UrCapture.dnt=(typeof A[1]=="boolean")?A[1]:UrCapture.dnt;break;case"_exclude":var z=UrCapture.exclude;UrCapture.exclude=(typeof A[1]=="object")?A[1]:UrCapture.exclude;UrCapture.exclude.ajax=(typeof UrCapture.exclude.ajax=="object"&&UrCapture.exclude.ajax.length)?UrCapture.exclude.ajax:z.ajax;UrCapture.exclude.forms=(typeof UrCapture.exclude.forms=="object"&&UrCapture.exclude.forms.length)?UrCapture.exclude.forms:z.forms;UrCapture.exclude.pages=(typeof UrCapture.exclude.pages=="object"&&UrCapture.exclude.pages.length)?UrCapture.exclude.pages:z.pages;break;case"_forms":UrCapture.forms=(typeof A[1]=="boolean")?A[1]:UrCapture.forms;break;case"_headers":UrCapture.headers=(typeof A[1]=="boolean")?A[1]:UrCapture.headers;break;case"_id":UrCapture.id=A[1]||UrCapture.id;break;case"_ignoreCase":UrCapture.ignoreCase=(typeof A[1]=="boolean")?A[1]:UrCapture.ignoreCase;break;case"_referrer":UrCapture.referrer=(typeof A[1]=="boolean")?A[1]:UrCapture.referrer;break;case"_scrub":var s=UrCapture.scrub;UrCapture.scrub=(typeof A[1]=="object")?A[1]:UrCapture.scrub;UrCapture.scrub.ajax=(typeof UrCapture.scrub.ajax=="object"&&UrCapture.scrub.ajax.length)?UrCapture.scrub.ajax:s.ajax;UrCapture.scrub.ids=(typeof UrCapture.scrub.ids=="object"&&UrCapture.scrub.ids.length)?UrCapture.scrub.ids:s.ids;UrCapture.scrub.names=(typeof UrCapture.scrub.names=="object"&&UrCapture.scrub.names.length)?UrCapture.scrub.names:s.names;UrCapture.scrub.regex=(typeof UrCapture.scrub.regex=="object"&&UrCapture.scrub.regex.length)?UrCapture.scrub.regex:s.regex;UrCapture.scrub.json=(typeof UrCapture.scrub.json=="object"&&UrCapture.scrub.json.length)?UrCapture.scrub.json:s.json;break;case"_scrubCards":UrCapture.scrubCards=(typeof A[1]=="boolean")?A[1]:UrCapture.scrubCards;break;case"_scrubMask":UrCapture.scrubMask=(typeof A[1]=="string")?A[1]:UrCapture.scrubMask;break;case"_scrubCardsPartial":UrCapture.scrubCardsPartial=(typeof A[1]=="boolean")?A[1]:UrCapture.scrubCardsPartial;break;case"_scrubPasswords":UrCapture.scrubPasswords=(typeof A[1]=="boolean")?A[1]:UrCapture.scrubPasswords;break;case"_scrubSource":UrCapture.scrubSource=(typeof A[1]=="boolean")?A[1]:UrCapture.scrubSource;break;case"_domScrubbingRules":UrCapture.domScrubbingRules=(typeof A[1]==="object"&&A[1].length)?A[1]:UrCapture.domScrubbingRules;break;case"_scrubOptions":UrCapture.scrubOptions=(typeof A[1]==="boolean")?A[1]:UrCapture.scrubOptions;break;case"_server":UrCapture.server=(typeof A[1]=="string"&&A[1].replace(/^\s+|\s+$/g,"")!="")?A[1]:UrCapture.server;break;case"_source":UrCapture.source=(typeof A[1]=="boolean")?A[1]:UrCapture.source;break;case"_xhr":UrCapture.xhr=(typeof A[1]=="boolean")?A[1]:UrCapture.xhr;break;case"_size":UrCapture.size=(typeof A[1]=="number")?A[1]:UrCapture.size;break;case"_timeout":UrCapture.timeout=(typeof A[1]=="number")?A[1]:UrCapture.timeout;break;case"_onready":if((typeof A[1]==="function")||(typeof A[1]==="object"&&typeof A[1].callback==="function")){UrCapture.onready=typeof A[1]==="function"?A[1]:A[1].callback;if(typeof A[1].context==="object"){UrCapture.onreadyContext=A[1].context}if(Object.prototype.toString.call(A[1].args)==="[object Array]"){UrCapture.onreadyArgs=A[1].args}}break}}}var g=0;try{if(navigator.appName=="Microsoft Internet Explorer"){var B=navigator.userAgent;var w=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(w.exec(B)!=null){g=parseFloat(RegExp.$1)}if(g<9){UrCapture.ready=false;c();return}}}catch(C){}if(UrCapture.dnt&&(navigator.doNotTrack=="yes"||navigator.doNotTrack=="1"||navigator.msDoNotTrack=="1")){return}function f(L,e,i){if(L.addEventListener){L.addEventListener(e,i,false)}else{if(L.attachEvent){L.attachEvent("on"+e,i)}else{return false}}return true}function n(O){var L=[],N={};for(var M=0,e=O.length;M<e;M++){if(!N[O[M]]){N[O[M]]={};L.push(O[M])}}return L}function a(L,N){if(L.length>0&&N.length>0){var e=UrCapture.ignoreCase?"i":"";for(var M in N){if(N.hasOwnProperty(M)){if(new RegExp(N[M],e).test(L)){return true}}}}return false}function o(O,M){var e=[],L,N;for(L=0,N=O.length;L<N;L++){if(O[L].hasOwnProperty(M)){e.push(O[L][M])}}return e}function y(O,M,e){var N=null;for(var L in O){N=(function(S,P){if(O.hasOwnProperty(L)&&typeof O[L]==="object"){if(arguments.length===1){for(var R=0;R<S.length;R++){if(S.indexOf(L)===-1){return null}}return O[L]}else{if(arguments.length===2){var Q=UrCapture.ignoreCase?"i":"";for(var i=0;i<S.length;i++){if(!new RegExp(O[L][S[i]],Q).test(P[i])){return null}}return O[L]}}}})(M,e);if(N){return N}}return N}function E(M,L){var e;if(M===null){return}L(M);for(e in M){if(M.hasOwnProperty(e)){if(typeof M[e]==="object"){E(M[e],L)}}}}function p(L){var P,O={},M,i;if(!L||!L.hasOwnProperty("rules")){return this}else{P=L.rules}try{for(O in P){if(P.hasOwnProperty(O)){M=P[O].key;i=P[O].flags||[];E(this,function(e){if(e&&e.hasOwnProperty(M)){if(i.indexOf("ccn")!==-1){if(m(e[M])){if(e[M]){e[M]=e[M].toString().mask(UrCapture.scrubMask,UrCapture.scrubCardsPartial)}}}else{if(e[M]){e[M]=e[M].toString().mask(UrCapture.scrubMask)}}}})}}return this}catch(N){l(N,"An error occurred in ScrubObject()")}}function q(){var N,Q,M,R,V,O,U,S=[],L=[];if(typeof b.wildcards==="undefined"){b.wildcards=[];for(var Q=0;Q<UrCapture.scrub.names.length;Q++){if(UrCapture.scrub.names[Q].indexOf("*")!==-1){b.wildcards.push(UrCapture.scrub.names[Q]);UrCapture.scrub.names.splice(Q,1);Q--}}}if(g==0||g>=8){if(UrCapture.scrubPasswords){try{N=document.getElementsByTagName("input");for(Q=0;Q<N.length;Q++){if(N[Q].type.toLowerCase()==="password"&&N[Q].getAttribute("urscrub")===null){N[Q].setAttribute("urscrub","")}}}catch(T){l(T,"Set Password Scrub Attributes")}}try{if(UrCapture.scrubCards){R=document.getElementsByTagName("input");V=document.getElementsByTagName("textarea");N=j([R,V]);if(N.length>0){for(Q=0;Q<N.length;Q++){O=N[Q].value;if(N[Q].getAttribute("urscrub")===null&&O.length>0&&m(O)){N[Q].setAttribute("urscrub","");UrCapture.cardFieldCache.add(N[Q].name)}}}}}catch(T){l(T,"Set Card Scrub Attributes")}try{if(UrCapture.scrub.ids.length>0){for(Q=0;Q<UrCapture.scrub.ids.length;Q++){N=document.getElementById(UrCapture.scrub.ids[Q]);if(N!=null&&N.getAttribute("urscrub")===null){N.setAttribute("urscrub","")}}}}catch(T){l(T,"Set IDs Scrub Attributes")}try{N=r("name");if(UrCapture.scrub.names.concat(b.wildcards).length>0&&N.length>0){for(Q=0;Q<N.length;Q++){if(N[Q].getAttribute("urscrub")!==null){continue}if(UrCapture.scrub.names.indexOf(N[Q].name)!=-1){N[Q].setAttribute("urscrub","");continue}L=b.wildcards;for(var P=0;P<L.length;P++){U=L[P];S[0]=U.substring(0,U.indexOf("*"));S[1]=U.substring(U.indexOf("*")+1,U.length);if(N[Q].name.substr(0,S[0].length)!==S[0]){continue}if(N[Q].name.substr(S[0].length+1,S[1].length)===S[1]){N[Q].setAttribute("urscrub","");break}}}}}catch(T){l(T,"Set Name Scrub Attributes")}}}function r(O){var M=[];try{M=document.querySelectorAll("["+O+"]")}catch(Q){var P=document.getElementsByTagName("*");for(var N=0,L=P.length;N<L;N++){if(P[N].getAttribute(O)!==null){M.push(P[N])}}}return M}function I(P){var O=[];for(var M=0,L=P.length;M<L;M++){try{if(P[M].name){O.push(P[M].name)}if(P[M].getAttribute("urscrub")){O.push(P[M].getAttribute("urscrub"))}}catch(N){l(N,"Get Name Attributes")}}return O}function x(){var e="xxxxxxxx-xxxx-xxxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(M){var L=Math.random()*16|0,i=M=="x"?L:(L&3|8);return i.toString(16)});return e}function d(N,L){var O=[];for(var M in N){if(N.hasOwnProperty(M)){var i=L?L+"["+M+"]":M,e=N[M];if(typeof e==="undefined"){return M}O.push(typeof e=="object"?d(e,i):i+"="+e)}}return O.join("&")}function v(M){try{var L={};M.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(N,e,P,O){L[e]=O});return L}catch(i){l(i,"objToQuery -> malformed post params: "+M)}}function h(i){var e=[];if(g==0||g>=9){return Array.prototype.slice.call(i)}for(A in i){if(i.hasOwnProperty(A)){e.push(i[A])}}return e}UrCapture.scrub.ajax=n(UrCapture.scrub.ajax);UrCapture.scrub.ids=n(UrCapture.scrub.ids);UrCapture.scrub.names=n(UrCapture.scrub.names);var K=(function(){var e=0,N=document.domain,M=N.split("."),L="_urDomainCheck=";while(e<(M.length-1)&&document.cookie.indexOf(L)===-1){N=M.slice(-1-(++e)).join(".");document.cookie=L+N+"; path=/; domain="+N+"; max-age=3"}return N})();if(!UrCapture.getCookie(UrCapture.cookie)){document.cookie=UrCapture.cookie+"="+x()+"; path=/; domain="+K}try{UrCapture.xdr=(window.XDomainRequest&&g>=8&&g<10)?XDomainRequest:null;UrCapture.ready=(window.XMLHttpRequest||UrCapture.xdr)}catch(C){UrCapture.ready=false;l(C,"XDR Check")}window.onbeforeunload=function(i){i=i||window.event};UrCapture.send=function(M,L){var S,i,N,R,Q=false;try{if(UrCapture.xdr){S=new UrCapture.xdr();S.open("POST",UrCapture.server)}else{S=new XMLHttpRequest();try{(S.urOpen)?S.urOpen("POST",UrCapture.server,L):S.open("POST",UrCapture.server,L);(S.urSetRequestHeader)?S.urSetRequestHeader("Content-type","application/x-www-form-urlencoded"):S.setRequestHeader("Content-type","application/x-www-form-urlencoded")}catch(P){for(R in S){if(S.hasOwnProperty(R)){try{S[R].open("POST",UrCapture.server,L);S[R].setRequestHeader("Content-type","application/x-www-form-urlencoded")}catch(P){Q=P;continue}Q=false;break}}}if(Q){l(Q,"Failed to send data to capture server using XMLHttpRequest object");return}}if(L){S.timeout=UrCapture.timeout}S.send(J(M))}catch(O){l(O,"Send Capture Data")}};UrCapture.domUpload=function(i){try{if(i.action=="PAGE"&&a(document.URL,UrCapture.exclude.pages)){return false}var L={id:UrCapture.id,action:i.action,cookie:UrCapture.getCookie(UrCapture.cookie),url:document.URL,version:UrCapture.version};if(L.action==="AJAX"){if(i.data){L.data=i.data}if(i.method){L.method=i.method}if(i.status){L.status=i.status}if(i.responseText){L.responseText=i.responseText}if(i.requestHeaders){L.requestHeaders=i.requestHeaders}if(i.target){L.target=i.target}}if(i.cookies||(typeof i.cookies==="undefined"&&UrCapture.cookies)){L.cookies=UrCapture.getCookies()}if(i.dimensions||(typeof i.cookies==="undefined"&&UrCapture.dimensions)){L.dimensions=UrCapture.getDimensions()}if(i.headers||(typeof i.cookies==="undefined"&&UrCapture.headers)){L.responseHeaders=UrCapture.getHeaders().headers}if(i.referrer||(typeof i.referrer==="undefined"&&UrCapture.headers)){L.referrer=document.referrer}if(i.source||(typeof i.source==="undefined"&&UrCapture.source)){L.source=UrCapture.getPageSource();if(UrCapture.size&&L.source.length>UrCapture.size){L.source="Page source code was excluded as its size ("+L.source.length+" bytes) exceeded the maximum allowed size of "+UrCapture.size+" bytes"}}else{L.sourceExcluded=true}UrCapture.send(L,true);return true}catch(M){l(M,"DOM Upload");return false}};UrCapture.init=function(){if(UrCapture.forms){UrCapture.getForms()}if(UrCapture.autoUpload){UrCapture.domUpload({action:"PAGE",cookies:UrCapture.cookies,dimensions:UrCapture.dimensions,headers:UrCapture.headers,referrer:UrCapture.referrer,source:UrCapture.source})}};UrCapture.getDimensions=function(){var i=document.getElementsByTagName("body")[0],e=window.innerWidth||document.documentElement.clientWidth||i.clientWidth,L=window.innerHeight||document.documentElement.clientHeight||i.clientHeight;return[e,L]};UrCapture.getForms=function(){var L=document.forms,Q=0,N=[];if(L.length){var P=false;for(var M=0;M<L.length;M++){N[M]=L[M];if(UrCapture.boundForms.indexOf(L[M])==-1){f(L[M],"submit",function(R){var i=(R.currentTarget)?R.currentTarget:R.srcElement;u.call(i,false)});P=true;Q++}try{if(typeof L[M].urSubmit!=="function"){L[M].urSubmit=L[M].submit;L[M].submit=u}}catch(O){l(O,"getForms submit() override")}}UrCapture.boundForms=N;if(P){q()}}return Q};UrCapture.getHeaders=function(){var N="";var L="";try{var i=new XMLHttpRequest();i.urOpen?i.urOpen("GET",document.URL,false):i.open("GET",document.URL,false);i.urSend?i.urSend(null):i.send(null);N=i.getAllResponseHeaders();L=i.responseText}catch(M){l(M,"Get Headers")}return({headers:N,source:L})};function k(L,i,M){var e=L;i(L);L=L.firstChild;while(L){k(L,i,M);L=L.nextSibling}if(e.nodeType===1){M(e)}}function H(){var e="";if(null!==document.doctype){node=document.doctype.nextSibling;while(node){if(node.nodeType===8){e+="<!--"+node.nodeValue+"-->"}node=node.nextSibling}}return e}UrCapture.getPageSource=function(){var M="",O=[],V=O[O.length-1]||null,R=null,W=false,P=null,L=["INPUT","OPTION","TEXTAREA"],Q=["INPUT","IMG","BR","HR","AREA","PARAM","META","LINK","TRACK","SOURCE","PICTURE","WBR","BASE","EMBED"],T="<!DOCTYPE html>",N="",i=document.doctype,e=new Date().getTime(),U;if(i){T="<!DOCTYPE "+i.name+(i.publicId?' PUBLIC "'+i.publicId+'"':"")+(!i.publicId&&i.systemId?" SYSTEM":"")+(i.systemId?' "'+i.systemId+'"':"")+">"}M+=H();k(document.documentElement,function(Y){W=false;if(Y.nodeType===1&&Q.indexOf(Y.nodeName)===-1){O.push(Y.nodeName.toLowerCase())}if(Y.nodeType===3&&Y.nodeValue&&Y.nodeValue.trim().length>0){if(O[O.length-1]==="option"&&(UrCapture.scrub.ids.indexOf(Y.parentNode.parentNode.id)!==-1||UrCapture.scrub.names.indexOf(Y.parentNode.parentNode.name)!==-1)){if(m(Y.nodeValue)){M+=Y.nodeValue.mask(UrCapture.scrubMask,UrCapture.scrubCardsPartial)}else{M+=Y.nodeValue.mask(UrCapture.scrubMask)}}else{if(O[O.length-1]==="textarea"&&(UrCapture.scrub.ids.indexOf(Y.parentNode.id)!==-1||UrCapture.scrub.names.indexOf(Y.parentNode.name)!==-1)){if(m(Y.nodeValue)){M+=Y.nodeValue.mask(UrCapture.scrubMask,UrCapture.scrubCardsPartial)}else{M+=Y.nodeValue.mask(UrCapture.scrubMask)}}else{M+=Y.nodeValue}}}else{if(Y.nodeType===8){M+="<!-- "+Y.nodeValue+"-->"}else{if(Y.nodeType===1){M+="<"+Y.nodeName.toLowerCase();if(Y.attributes&&Y.attributes.length>0){for(var X=0;X<Y.attributes.length;X++){if(Y.attributes[X].nodeName.toLowerCase()==="value"){W=true;continue}if(Y.attributes[X].nodeName==="urscrub"){continue}P=Y.attributes[X].nodeValue;M+=" "+Y.attributes[X].nodeName+'="'+P+'"'}}do{if(W||Y.value){if(typeof Y.value==="undefined"){break}else{R=Y.value}if(L.indexOf(Y.nodeName)!==-1){if(UrCapture.scrub.ids.indexOf(Y.id)!==-1||UrCapture.scrub.names.indexOf(Y.name)!==-1||Y.type==="password"||(Y.nodeName==="OPTION"&&UrCapture.scrub.ids.indexOf(Y.parentNode.id)!==-1||UrCapture.scrub.names.indexOf(Y.parentNode.name)!==-1)){if(m(Y.value)){R=Y.value.mask(UrCapture.scrubMask,UrCapture.scrubCardsPartial)}else{R=Y.value.mask(UrCapture.scrubMask)}}}M+=' value="'+R+'"';break}}while(false);M+=">"}}}},function(X){if(O[O.length-1]===X.nodeName.toLowerCase()){M+="</"+O.pop()+">"}});if(D()){M=G(M)}var S=/<urscrub\b[^>]*?\/>|<urscrub\b[^>]*>(?:(?!<urscrub\b[^>]*>|<\/urscrub>)[\S\s])*<\/urscrub>/i;while(M!=(M=M.replace(S,""))){}return T+M};var G=function(N){var M,O,i,e=true,L={};var P=function(T,V){if(typeof V==="undefined"){L.code=0;L.name="typeError";L.message="Undefined substring in String.replace(). The HTML element's value attribute is likely malformed. Check your website's HTML near "+T;l(L,"scrubPlainText => replaceFunc");return T}var U=T.indexOf(V),W=T.substr(0,U),S=T.substring(U+V.length),R=i?UrCapture.scrub.regex[i].flags:null,Q=null;if(e){if(m(V)){Q=V.mask(UrCapture.scrubMask,UrCapture.scrubCardsPartial)}}else{if(R&&R!==null&&R.indexOf("ccn")!==-1&&m(V)){Q=V.mask(UrCapture.scrubMask,UrCapture.scrubCardsPartial)}else{Q=V.mask(UrCapture.scrubMask)}}return Q?W+Q+S:T};M=/value=(?:"?(.*?)"|'?(.*?)'|[^"'][^\s]*)/gi;N=N.replace(M,P);M=/>(.*?)<\/textarea>/gi;N=N.replace(M,P);e=false;if(UrCapture.scrub.regex&&UrCapture.scrub.regex.length>0){for(i in UrCapture.scrub.regex){if(UrCapture.scrub.regex.hasOwnProperty(i)){O=UrCapture.scrub.regex[i];N=N.replace(O.searchExpr,P)}}}return N};var D=function(){var i,e;for(i in UrCapture.domScrubbingRules){if(UrCapture.domScrubbingRules.hasOwnProperty(i)){e=UrCapture.domScrubbingRules[i];if(document.URL.indexOf(e.resource)!==-1){return e}}}return false};var u=function(O){var U=0,R=0,N=0,L,P,Y,V,Q,M=[],W,X,T;L=this.elements;W=o(UrCapture.scrub.json,"field");if(L.length){for(R=0;R<L.length;R++){switch(L[R].nodeName.toUpperCase()){case"INPUT":case"TEXTAREA":if(L[R].name&&L[R].type.toLowerCase()!="button"){P=L[R].value.trim();if(W.indexOf(L[R].name)!==-1){try{X=JSON.parse(P)}catch(S){l(S,"Invalid JSON set for scrubbing in processFormData. Field: "+L[R].name);continue}T=p.call(X,y(UrCapture.scrub.json,"field",L[R].name));P=JSON.stringify(T);M[U++]=[L[R].name,P];continue}if(UrCapture.scrubCards&&m(P)){UrCapture.cardFieldCache.add(L[R].id);P=P.mask(UrCapture.scrubMask,UrCapture.scrubCardsPartial)}else{if(L[R].getAttribute("urscrub")!=null){P=P.mask(UrCapture.scrubMask)}}M[U++]=[L[R].name,P]}break;case"SELECT":if(L[R].name){if(!L[R].multiple){P=L[R].value;if(L[R].getAttribute("urscrub")!=null){P=L[R].value.mask(UrCapture.scrubMask)}M[U++]=[L[R].name,P]}else{if(L[R].selectedIndex>=0){Y=L[R].options;if(typeof Y.length!=="undefined"){for(N=0;N<Y.length;N++){if(Y[N].selected){P=Y[N].value;if(L[R].getAttribute("urscrub")!=null){P=Y[N].value.mask(UrCapture.scrubMask)}M[U++]=[L[R].name,P]}}}}}}break}}}if(!this.defaultPrevented){Q="";for(R=0;R<M.length;R++){Q+=M[R][0]+"="+M[R][1]+"&"}V={id:UrCapture.id,action:"FORM",cookie:UrCapture.getCookie(UrCapture.cookie),url:document.URL,version:UrCapture.version,target:this.action,method:this.method.toUpperCase(),data:Q};if(!a(this.action,UrCapture.exclude.forms)){UrCapture.send(V,false)}}if(arguments.length===0){this.urSubmit()}};if(UrCapture.ready&&UrCapture.xhr&&(g==0||g>=8)&&window.XMLHttpRequest){XMLHttpRequest.prototype.urMethod="";XMLHttpRequest.prototype.urUrl="";XMLHttpRequest.prototype.urRequest="";XMLHttpRequest.prototype.urBody="";XMLHttpRequest.prototype.urOpen=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.urSend=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.urSetRequestHeader=XMLHttpRequest.prototype.setRequestHeader;var t=function(R){var V,O,M,W,N=false,Y,ad={},U,P,ac,L,aa,X={};var T=0,Q=1,S=2;if(!(g>=8&&g<9)){R=this}if(R.readyState==UrCapture.xhrConst.DONE){if(!a(R.urUrl,UrCapture.exclude.ajax)){if(R.urBody){q();L=o(UrCapture.scrub.json,"field");aa=n(UrCapture.scrub.ajax.concat(I(r("urscrub")),L));if(aa.length){if(typeof R.urBody==="string"){try{O=decodeURIComponent(R.urBody);N=R.urBody!==O}catch(ab){O=R.urBody}try{O=JSON.parse(O);M=Q}catch(ab){O=v(O);M=T}}else{O=R.urBody;M=S}if(M===Q||M===S){P=y(UrCapture.scrub.json,["field","url"],["__xhrpostdata",R.responseURL]);ad=(P)?p.call(O,P):O}else{Y=(typeof O!=="undefined")?O:R.urBody;for(var Z in Y){if(Y.hasOwnProperty(Z)){if(aa.indexOf(decodeURIComponent(Z))!==-1){ac=false;if(typeof Y[Z]==="string"){if(L.indexOf(Z)!==-1){try{W=JSON.parse(Y[Z].trim());ac=true}catch(ab){l(ab,"Invalid JSON set for scrubbing in AJAX Call. Field: "+Z);continue}}else{if(UrCapture.scrubCards&&m(Y[Z])){ad[Z]=Y[Z].mask(UrCapture.scrubMask,UrCapture.scrubCardsPartial)}else{ad[Z]=Y[Z].mask(UrCapture.scrubMask)}continue}}if(typeof W==="undefined"){W=Y[Z]}U=p.call(W,y(UrCapture.scrub.json,"field",Z));ad=ac?JSON.stringify(U):U}else{ad[Z]=Y[Z]}}}}if(typeof R.urBody==="string"){ad=(M===Q)?JSON.stringify(ad):d(ad,false);if(N){ad=encodeURIComponent(ad)}}else{ad=JSON.stringify(ad)}R.urBody=ad}}try{V=decodeURIComponent(decodeURIComponent(R.responseText))}catch(ab){V=R.responseText}if(UrCapture.scrubCards){V=G(V)}var ae={id:UrCapture.id,action:"AJAX",cookie:UrCapture.getCookie(UrCapture.cookie),cookies:UrCapture.getCookies(),url:document.URL,version:UrCapture.version,target:R.urUrl,method:R.urMethod,data:R.urBody,status:R.status,requestHeaders:R.urRequest,responseHeaders:R.getAllResponseHeaders(),responseText:V};UrCapture.send(ae,true)}X=y(UrCapture.uploadTriggers.ajax,["url"],[R.urUrl]);if(X&&typeof X.delay==="undefined"){X.delay=0}if(X){if(F){window.clearTimeout(F)}F=window.setTimeout(function(){F=null;if(UrCapture.forms){UrCapture.getForms()}if(!a(document.URL,UrCapture.exclude.pages)){UrCapture.domUpload({action:"DOM",cookies:UrCapture.cookies,dimensions:UrCapture.dimensions,headers:UrCapture.headers,referrer:UrCapture.referrer,source:UrCapture.source})}},X.delay)}}};XMLHttpRequest.prototype.open=function(){this.urMethod=arguments[0];this.urUrl=arguments[1];if(!this.capture){try{if(g>=8&&g<9){var N=this;var L=Date.now()+30000;var i=window.setInterval(function(){if(N.readyState==UrCapture.xhrConst.DONE||Date.now()>=L){clearInterval(i)}if(N.readyState==UrCapture.xhrConst.DONE){t(N)}},10)}else{f(this,"readystatechange",t)}}catch(M){l(M,"XHR Open")}}return(this.urOpen)?this.urOpen.apply(this,h(arguments)):this.open.apply(this,arguments)};XMLHttpRequest.prototype.send=function(){this.urBody=arguments[0];(this.urSend)?this.urSend.apply(this,h(arguments)):this.send.apply(this,arguments)};XMLHttpRequest.prototype.setRequestHeader=function(){if(this.urRequest){this.urRequest+=arguments[0]+": "+arguments[1]+"\n"}else{this.urRequest=arguments[0]+": "+arguments[1]+"\n"}(this.urSetRequestHeader)?this.urSetRequestHeader.apply(this,h(arguments)):this.setRequestHeader.apply(this,arguments)}}var j=function(N){var e=[],M,L;for(M=0;M<N.length;M++){for(L=0;L<N[M].length;L++){e.push(N[M][L])}}return e};var m=(function(e){return function(P){var L=P.replace(/\D/g,""),O=/^(?:[1-9]\d{11,18})$/g,i=L.length,N=1,M=0;if(!L.match(O)){return false}while(i--){M+=!(N^=1)?parseInt(L[i],10):e[L[i]]}return M%10===0&&M>0}})([0,2,4,6,8,1,3,5,7,9]);if(UrCapture.ready){if(UrCapture.onready){try{UrCapture.onready.apply(UrCapture.onreadyContext,UrCapture.onreadyArgs)}catch(C){l(C,"Error running onready callback")}}window.attachEvent?window.attachEvent("onload",UrCapture.init()):window.addEventListener("load",UrCapture.init(),false)}else{c()}}catch(C){l(C,"Main Block")}})();
